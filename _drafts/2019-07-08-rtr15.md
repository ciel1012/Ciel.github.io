---
layout:     post
title:      "Non-Photorealistic Rendering"
subtitle:   "\"《Real-Time Rendering 4th》笔记——第十五章 非真实感渲染\""
date:       2019-01-01
author:     "Ciel"
header-img: "img/post-bg-rtr.jpg"
catalog: true
mathjax: true
tags:
    - Real-Time Rendering
---

# Non-Photorealistic Rendering

> 本章首先详细讨论了实现卡通渲染风格的方法，然后讨论了NPR范围内的其他主题。最后介绍各种线条渲染技术。

非真实感渲染（NPR）也称为风格化渲染。NPR可以用来创建类似于技术说明的图像。只显示那些与特定应用程序的目标相关的细节。比如在修理时只高亮显示发动机的简单线条图。NPR的另一个领域是模拟绘画风格和天然媒介，例如，钢笔和墨水，木炭和水彩。这是一个巨大的领域，适用于各种各样的算法，试图捕捉各种媒体的感觉。考虑到这种宽度，这里主要关注绘制笔画和线条的技术，目标是给出一些用于实时NPR的算法。

![\img\in-post\rtr15\15-1](\img\in-post\rtr15\15-1.jpg)

原书图15.1，应用于咖啡机的各种非真实感渲染风格。

### 1卡通渲染

在NPR中，卡通渲染（cel / toon rendering）吸引了大量注意。因为这种风格具有幻想和童真内涵。最简单的方法是，用实线将不同的纯色区域分隔开来。这种风格流行的原因之一是，通过简化和去除杂乱，可以有放大与呈现相关信息的效果。对于卡通人物，更多观众会认同那些画得简单的风格。

toon渲染风格已经在计算机图形学中使用了几十年，将三维模型与二维cel动画集成在一起。与其它NPR相比，它易于设计，适合计算机自动生成。许多电子游戏都使用它来达到良好的效果。

![\img\in-post\rtr15\15-2](\img\in-post\rtr15\15-2.jpg)

原书图15.2，一个实时渲染NPR游戏例子，Okami(大神)

- 物体的轮廓通常被渲染成黑色，这样可以放大卡通效果。下一节将描述查找和渲染描边的概要。

- 有几种方法来处理卡通材质表面着色。最常见的两种方法是用纯色(非亮色)填充网格区域，或者使用两种色调，分别表示亮区和阴影区。双色调方法，有时称为hard shading，在像素着色器中很容易执行，当法线和光源方向的点积超过某个值时，使用较浅的颜色，如果不超过某个值，则使用较深的色调。当光照更复杂时，另一种方法是量化最终图像本身。也称为色调分离(posterization)，这是一个取一系列连续的值并转换为几个色调的过程，每个色调之间有一个急剧的变化。量化RGB值可能会导致不愉快的色调变化，因为每个单独的通道都以与其他通道不密切相关的方式发生变化。使用HSV、HSL或Y'CbCr等保色空间是更好的选择。使用设计好的一维函数或纹理可以将强度级别重新映射为特定的色调或颜色。纹理也可以使用量化或其他过滤器进行预处理。图15.16显示了另一个具有更多颜色级别的示例。

![\img\in-post\rtr15\15-3](\img\in-post\rtr15\15-3.jpg)

原书图15.3，左边的基本渲染依次应用了实体填充、色调分离和铅笔着色技术。

- Barla等人（[文章链接](https://hal.inria.fr/inria-00362888/document/)）通过使用二维图代替一维阴影纹理来添加依赖于视图的效果。第二个维度是由表面的深度或方向决定的。例如，当物体距离较远或快速移动时，它可以平滑地软化。这个算法，结合了其他各种着色方程和绘制纹理，被用于游戏《军团要塞2》中，以提供卡通和现实风格的混合。toon着色器的变化可以用于其他目的，例如在可视化表面或地形上的特征时，可以放大对比度。
